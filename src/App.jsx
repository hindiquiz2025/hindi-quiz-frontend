import { useState, useEffect } from 'react'
import './App.css'

const QUESTION_TIME = 20; // seconds
const questions = [

  // CATEGORY 1: рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛
  {
    id: 1,
    category: "рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛",
    question: "рднрд╛рд░рддреАрдп рд╕рдВрд╡рд┐рдзрд╛рди рдХреЗ рдХрд┐рд╕ рдЕрдиреБрдЪреНрдЫреЗрдж рдореЗрдВ рд╣рд┐рдВрджреА рдХреЛ рд╕рдВрдШ рдХреА рд░рд╛рдЬрднрд╛рд╖рд╛ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ?",
    options: ["рдЕрдиреБрдЪреНрдЫреЗрдж 343", "рдЕрдиреБрдЪреНрдЫреЗрдж 345", "рдЕрдиреБрдЪреНрдЫреЗрдж 347", "рдЕрдиреБрдЪреНрдЫреЗрдж 349"],
    correct: 0,
    image: null
  },
  {
    id: 2,
    category: "рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдЕрдзрд┐рдирд┐рдпрдо рдХрд┐рд╕ рд╡рд░реНрд╖ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛?",
    options: ["1950", "1963", "1965", "1976"],
    correct: 1,
    image: null
  },
  {
    id: 3,
    category: "рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдирд┐рдпрдо, 1976 рдХреЗ рдЕрдиреБрд╕рд╛рд░, рднрд╛рд░рдд рдХреЛ рдХрд┐рддрдиреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ?",
    options: ["рджреЛ", "рддреАрди", "рдЪрд╛рд░", "рдкрд╛рдБрдЪ"],
    correct: 1,
    image: null
  },
  {
    id: 4,
    category: "рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рд╕рдВрдмрдВрдзреА рдмрдВ рд╕рдВрд╕рджреАрдп рд╕рдорд┐рддрд┐ рдХрд╛ рдЧрдарди рдХрд┐рд╕ рдЕрдзрд┐рдирд┐рдпрдо рдХреЗ рддрд╣рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ?",
    options: ["рд░рд╛рдЬрднрд╛рд╖рд╛ рдЕрдзрд┐рдирд┐рдпрдо, 1963", "рд░рд╛рдЬрднрд╛рд╖рд╛ рд╕рдВрдХрд▓реНрдк, 1968", "рд░рд╛рдЬрднрд╛рд╖рд╛ рдирд┐рдпрдо, 1976", "рд╕рдВрд╡рд┐рдзрд╛рди рдХрд╛ рдЕрдиреБрдЪреНрдЫреЗрдж 344"],
    correct: 3,
    image: null
  },
  {
    id: 5,
    category: "рд╕рдВрд╡реИрдзрд╛рдирд┐рдХ рдПрд╡рдВ рд╡реИрдзрд╛рдирд┐рдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛",
    question: "рд╕рдВрд╡рд┐рдзрд╛рди рдХреЗ рдХрд┐рд╕ рднрд╛рдЧ рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛ рд╕рдВрдмрдВрдзреА рдмрдВ рдкреНрд░рд╛рд╡рдзрд╛рди рджрд┐рдП рдЧрдП рд╣реИрдВ?",
    options: ["рднрд╛рдЧ XV", "рднрд╛рдЧ XVI", "рднрд╛рдЧ XVII", "рднрд╛рдЧ XVIII"],
    correct: 2,
    image: null
  },

  // CATEGORY 2: рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡
  {
    id: 6,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡",
    question: "рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрд╖ рд╣рд┐рдВрджреА рджрд┐рд╡рд╕ рдХрдм рдордирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    options: ["10 рдЬрдирд╡рд░реА", "14 рд╕рд┐рддрдВрдмрд░", "26 рдЬрдирд╡рд░реА", "15 рдЕрдЧрд╕реНрдд"],
    correct: 1,
    image: null
  },
  {
    id: 7,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡",
    question: "рднрд╛рд░рдд рдХреА рд╕рдВрд╡рд┐рдзрд╛рди рд╕рднрд╛ рдиреЗ рд╣рд┐рдВрджреА рдХреЛ рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрдм рдЕрдкрдирд╛рдпрд╛ рдерд╛?",
    options: ["1947", "1949", "1950", "1965"],
    correct: 1,
    image: null
  },
  {
    id: 8,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡",
    question: "рд╡рд┐рд╢реНрд╡ рд╣рд┐рдВрджреА рджрд┐рд╡рд╕ рдХрдм рдордирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    options: ["14 рд╕рд┐рддрдВрдмрд░", "10 рдЬрдирд╡рд░реА", "21 рдлрд░рд╡рд░реА", "1 рдордИ"],
    correct: 1,
    image: null
  },
  {
    id: 9,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕рд╛ рдЕрдиреБрдЪреНрдЫреЗрдж рдХреЗрдВрджреНрд░ рд╕рд░рдХрд╛рд░ рдХреЛ рдирд┐рд░реНрджреЗрд╢ рджреЗрддрд╛ рд╣реИ?",
    options: ["рдЕрдиреБрдЪреНрдЫреЗрдж 343", "рдЕрдиреБрдЪреНрдЫреЗрдж 344", "рдЕрдиреБрдЪреНрдЫреЗрдж 351", "рдЕрдиреБрдЪреНрдЫреЗрдж 348"],
    correct: 2,
    image: null
  },
  {
    id: 10,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рд┐рдВрджреА рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдПрд╡рдВ рдорд╣рддреНрддреНрд╡",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рд╣рд┐рдВрджреА рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЧрдард┐рдд рдкреНрд░рдердо рд░рд╛рдЬрднрд╛рд╖рд╛ рдЖрдпреЛрдЧ рдХреЗ рдЕрдзреНрдпрдХреНрд╖ рдХреМрди рдереЗ?",
    options: ["рдмреА.рдЬреА. рдЦреЗрд░", "рдЧреЛрд╡рд┐рдВрдж рд╡рд▓реНрд▓рдн рдкрдВрддрдкрдВ", "рдмрд╛рд▓ рдЧрдВрдЧрд╛рдзрд░ рддрд┐рд▓рдХ", "рдорд╣рд╛рддреНрдорд╛ рдЧрд╛рдВрдзреА"],
    correct: 0,
    image: null
  },

  // CATEGORY 3: рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░
  {
    id: 11,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░",
    question: "рдХреЗрдВрджреНрд░реАрдп рд╣рд┐рдВрджреА рд╕рдорд┐рддрд┐ рдХрд╛ рдЕрдзреНрдпрдХреНрд╖ рдХреМрди рд╣реЛрддрд╛ рд╣реИ?",
    options: ["рд░рд╛рд╖реНрдЯреНрд░рдкрддрд┐", "рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА", "рдЧреГрд╣ рдордВрддреНрд░реА", "рдЙрдкрд░рд╛рд╖реНрдЯреНрд░рдкрддрд┐"],
    correct: 1,
    image: null
  },
  {
    id: 12,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рд╡рд┐рднрд╛рдЧ рдХрд┐рд╕ рдордВрддреНрд░рд╛рд▓рдп рдХреЗ рдЕрдзреАрди рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ?",
    options: ["рд╢рд┐рдХреНрд╖рд╛ рдордВрддреНрд░рд╛рд▓рдп", "рдЧреГрд╣ рдордВрддреНрд░рд╛рд▓рдп", "рд╕рдВрд╕реНрдХреГрддрд┐ рдордВрддреНрд░рд╛рд▓рдп", "рд╡рд┐рджреЗрд╢ рдордВрддреНрд░рд╛рд▓рдп"],
    correct: 1,
    image: null
  },
  {
    id: 13,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░",
    question: "рд╕рд░рдХрд╛рд░реА рдХрд╛рдордХрд╛рдЬ рдореЗрдВ рд╣рд┐рдВрджреА рдХреЗ рдкреНрд░рдпреЛрдЧ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реА рд╡рд╛рд░реНрд╖рд┐рдХ рдпреЛрдЬрдирд╛ рддреИрдпрд╛рд░ рдХреА рдЬрд╛ рддреА рд╣реИ?",
    options: ["рд╣рд┐рдВрджреА рдХрд╛рд░реНрдп рдпреЛрдЬрдирд╛", "рд░рд╛рдЬрднрд╛рд╖рд╛ рд╡рд╛рд░реНрд╖рд┐рдХ рдХрд╛рд░реНрдпрдХреНрд░рдо", "рд╣рд┐рдВрджреА рдкреНрд░реЛрддреНрд╕рд╛рд╣рди рдпреЛрдЬрдирд╛", "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдпреЛрдЬрдирд╛"],
    correct: 1,
    image: null
  },
  {
    id: 14,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░",
    question: "рдирдЧрд░ рд░рд╛рдЬрднрд╛рд╖рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕рдорд┐рддрд┐ (рдирд░рд╛рдХрд╛рд╕) рдХрд╛ рдЧрдарди рдХрд┐рд╕ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    options: ["рд╢рд╣рд░реЛрдВ рдореЗрдВ рд╣рд┐рдВрджреА рд╕рд╛рд╣рд┐рддреНрдп рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдирд╛", "рдХреЗрдВрджреНрд░реАрдп рд╕рд░рдХрд╛рд░реА рдХрд╛рд░реНрдпрд╛рд▓рдпреЛрдВ рдореЗрдВ рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛", "рд╣рд┐рдВрджреА рд╢рд┐рдХреНрд╖рдг рд╕рдВрд╕реНрдерд╛рдиреЛрдВ рдХреЛ рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рдирд╛", "рд╣рд┐рдВрджреА рдореЗрдВ рдЕрдиреБрд╕рдВрдзрд╛рди рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдирд╛"],
    correct: 1,
    image: null
  },
  {
    id: 15,
    category: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдиреАрддрд┐ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдПрд╡рдВ рдкреНрд░рд╕рд╛рд░",
    question: "рд░рд╛рдЬрднрд╛рд╖рд╛ рдХреЗ рдкреНрд░рдпреЛрдЧ рдореЗрдВ рдЙрддреНрдХреГрд╖реНрдЯ рдХрд╛рд░реНрдп рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдпрд╛ рд╕рдВрд╕реНрдерд╛рдиреЛрдВ рдХреЛ рдХреМрди рд╕рд╛ рдкреБрд░рд╕реНрдХрд╛рд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    options: ["рдЬреНрдЮрд╛рдирдкреАрда рдкреБрд░рд╕реНрдХрд╛рд░", "рд╕рд╛рд╣рд┐рддреНрдп рдЕрдХрд╛рджрдореА рдкреБрд░рд╕реНрдХрд╛рд░", "рд░рд╛рдЬрднрд╛рд╖рд╛ рдЧреМрд░рд╡ рдкреБрд░рд╕реНрдХрд╛рд░", "рд╡реНрдпрд╛рд╕ рд╕рдореНрдорд╛рди"],
    correct: 2,
    image: null
  },
  
  // CATEGORY 4: рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ
  {
    id: 16,
    category: "рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ",
    question: "Approval рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрдж рдХреНрдпрд╛ рд╣реИ?",
    options: ["рд╕реНрд╡реАрдХреГрддрд┐", "рд╕рд╣рдорддрд┐", "рдЕрдиреБрдореЛрджрди", "рдордВрдЬреВрд░реА"],
    correct: 2,
    image: null
  },
  {
    id: 17,
    category: "рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ",
    question: "Office Memorandum рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрдж рдХреНрдпрд╛ рд╣реИ?",
    options: ["рдХрд╛рд░реНрдпрд╛рд▓рдп рдЖрджреЗрд╢", "рдХрд╛рд░реНрдпрд╛рд▓рдп рд╕реВрдЪрдирд╛", "рдХрд╛рд░реНрдпрд╛рд▓рдп рдЬреНрдЮрд╛рдкрди", "рдХрд╛рд░реНрдпрд╛рд▓рдп рдкрддреНрд░"],
    correct: 2,
    image: null
  },
  {
    id: 18,
    category: "рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ",
    question: "Notification рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрдж рдХреНрдпрд╛ рд╣реИ?",
    options: ["рд╕реВрдЪрдирд╛", "рд╡рд┐рдЬреНрдЮрдкреНрддрд┐", "рдЕрдзрд┐рд╕реВрдЪрдирд╛", "рдШреЛрд╖рдгрд╛"],
    correct: 2,
    image: null
  },
  {
    id: 19,
    category: "рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ",
    question: "Minutes рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрдж рдХреНрдпрд╛ рд╣реИ?",
    options: ["рдмреИрдардХ рдХрд╛ рд╡рд┐рд╡рд░рдг", "рдХрд╛рд░реНрдпрд╕реВрдЪреА", "рдХрд╛рд░реНрдпрд╡реГрддреНрдд", "рдкреНрд░рддрд┐рд╡реЗрджрди"],
    correct: 2,
    image: null
  },
  {
    id: 20,
    category: "рдЕрдзрд┐рдХреГрдд рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрджрд╛рд╡рд▓реА рдПрд╡рдВ рдкреНрд░рдпреЛрдЧ",
    question: "Gazette рдХреЗ рд▓рд┐рдП рд╕рд╣реА рд╣рд┐рдВрджреА рдкрд╛рд░рд┐рднрд╛рд╖рд┐рдХ рд╢рдмреНрдж рдХреНрдпрд╛ рд╣реИ?",
    options: ["рд╕рд░рдХрд╛рд░реА рдкрддреНрд░рд┐рдХрд╛", "рд░рд╛рдЬрдкрддреНрд░", "рд╕рд░рдХрд╛рд░реА рд╕реВрдЪрдирд╛", "рдЖрдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдкреНрд░рдХрд╛рд╢рди"],
    correct: 1,
    image: null
  },
  // CATEGORY 5: рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛
  {
    id: 21,
    category: "рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛",
    question: "рдЗрд╕ рдЪрд┐рддреНрд░ рдореЗрдВ рджрд░реНрд╢рд╛рдП рдЧрдП рдкреНрд░рд╕рд┐рджреНрдз рд╣рд┐рдВрджреА рд╕рд╛рд╣рд┐рддреНрдпрдХрд╛рд░ рдХреМрди рд╣реИрдВ?",
    options: ["рдореБрдВрд╢реА рдкреНрд░реЗрдордЪрдВрдж", "рдЬрдпрд╢рдВрдХрд░ рдкреНрд░рд╕рд╛рдж", "рд╕реВрд░реНрдпрдХрд╛рдВрдд рддреНрд░рд┐рдкрд╛рдареА 'рдирд┐рд░рд╛рд▓рд╛'", "рд░рд╛рдордзрд╛рд░реА рд╕рд┐рдВрд╣ 'рджрд┐рдирдХрд░'"],
    correct: 0,
    image: "/images/pic1.jpg"
  },
  {
    id: 22,
    category: "рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛",
    question: "'рдордзреБрд╢рд╛рд▓рд╛' рдХреЗ рд░рдЪрдпрд┐рддрд╛, рдЗрд╕ рдЪрд┐рддреНрд░ рдореЗрдВ рджрд░реНрд╢рд╛рдП рдЧрдП рдкреНрд░рд╕рд┐рджреНрдз рдХрд╡рд┐ рдХреМрди рд╣реИрдВ?",
    options: ["рд╕реБрднрджреНрд░рд╛ рдХреБрдорд╛рд░реА рдЪреМрд╣рд╛рди", "рдорд╣рд╛рджреЗрд╡реА рд╡рд░реНрдорд╛", "рдореАрд░рд╛рдмрд╛рдИ", "рдЕрдореГрддрд╛ рдкреНрд░реАрддрдо"],
    correct: 1,
    image: "/images/pic2.jpg"
  },
  {
    id: 23,
    category: "рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛",
    question: "рдЗрд╕ рдЪрд┐рддреНрд░ рдореЗрдВ рджрд┐рдЦрд╛рдП рдЧрдП рд╣рд┐рдВрджреА рдирд╛рдЯрдХрдХрд╛рд░ рдХреМрди рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ 'рд╣рд┐рдВрджреА рдирд╛рдЯрдХ рдХрд╛ рдЬрдирдХ' рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    options: ["рд╣рд░рд┐рд╡рдВрд╢ рд░рд╛рдп рдмрдЪреНрдЪрди", "рд╕реБрдорд┐рддреНрд░рд╛рдирдВрджрди рдкрдВрдд", "рдореИрдерд┐рд▓реАрд╢рд░рдг рдЧреБрдкреНрдд", "рдЕрдЬреНрдЮреЗрдп"],
    correct: 0,
    image: "/images/pic3.jpg"
  },
  {
    id: 24,
    category: "рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛",
    question: "рдпрд╣ рдЪрд┐рддреНрд░ рдХрд┐рд╕ рднрдХреНрддрд┐рдХрд╛рд▓ рдХреЗ рдХрд╡рд┐ рдХрд╛ рд╣реИ, рдЬреЛ рднрдЧрд╡рд╛рди рдХреГрд╖реНрдг рдХреЗ рдЕрдирдиреНрдп рднрдХреНрдд рдереЗ рдФрд░ тАШрд╕реВрд░рд╕рд╛рдЧрд░тАЩ рдХреЗ рд░рдЪрдпрд┐рддрд╛ рд╣реИрдВ?",
    options: ["рдХрдмреАрд░ рджрд╛рд╕", "рддреБрд▓рд╕реАрджрд╛рд╕", "рд╕реВрд░рджрд╛рд╕", "рд░рд╕рдЦрд╛рди"],
    correct: 2,
    image: "/images/pic4.jpg"
  },
  {
    id: 25,
    category: "рдЪрд┐рддреНрд░рд╛рддреНрдордХ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА : рд╣рд┐рдВрджреА рдХреЗ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рдПрд╡рдВ рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреБрд░реЛрдзрд╛",
    question: "тАШрд░рд╛рдордЪрд░рд┐рддрдорд╛рдирд╕тАЩ рдХреЗ рд░рдЪрдпрд┐рддрд╛, рдЗрд╕ рдЪрд┐рддреНрд░ рдореЗрдВ рджрд░реНрд╢рд╛рдП рдЧрдП рдорд╣рд╛рди рд╕рдВрдд рдХрд╡рд┐ рдХреМрди рд╣реИрдВ?",
    options: ["рдХрдмреАрд░ рджрд╛рд╕", "рд╕реВрд░рджрд╛рд╕", "рддреБрд▓рд╕реАрджрд╛рд╕", "рд░рд╡рд┐рджрд╛рд╕"],
    correct: 2,
    image: "/images/pic5.jpg"
  },

  // CATEGORY 6: рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл
  {
    id: 26,
    category: "рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл",
    question: "рдПрдХ рдлрд╝рд┐рд▓реНрдо рдЬрд┐рд╕рдореЗрдВ рд╢реЗрд░ рдФрд░ рд╕рд┐рдВрд╣ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рд▓рдбрд╝рддреЗ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдирд╛рдореЛрдВ рдореЗрдВ рдЫреБрдкреЗ рд╣реИрдВред",
    options: ["рдЧрджрд░ 2", "рд╢реЗрд░рд╢рд╛рд╣", "рд╕рд┐рдВрд╣ рдЗрдЬрд╝ рдХрд┐рдВрдЧ", "рдмреЙрд░реНрдбрд░"],
    correct: 1,
    image: null
  },
  {
    id: 27,
    category: "рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл",
    question: `рдПрдХ рд▓рдбрд╝рдХреА, рдЬреЛ рдЯреНрд░реЗрди рдореЗрдВ рднрд╛рдЧ рдЬрд╛рддреА рд╣реИред
                рдПрдХ рд▓рдбрд╝рдХрд╛, рдЬреЛ рдЙрд╕реЗ рдЦреЛрдЬрддрд╛ рд╣реИред
                рдФрд░ рд╕рд░рд╕реЛ рдХреЗ рдЦреЗрддред
                рдпрд╣ рдХреМрди-рд╕реА рдореВрд╡реА рд╣реИ?`,
    options: ["рдЬрдм рд╡реА рдореЗрдЯ", "рджрд┐рд▓рд╡рд╛рд▓реЗ рджреБрд▓реНрд╣рдирд┐рдпрд╛ рд▓реЗ рдЬрд╛рдПрдБрдЧреЗ", "рд░рд╛рдЬрд╛ рд╣рд┐рдВрджреБрд╕реНрддрд╛рдиреА", "рдмрд░реНрдлрд╝реА"],
    correct: 1,
    image: null
  },
  {
    id: 28,
    category: "рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл",
    question: "рдкрдврд╝реЗрдЧрд╛ рдЗрдВрдбрд┐рдпрд╛тАж рддрднреА рддреЛ рдмрдврд╝реЗрдЧрд╛ рдЗрдВрдбрд┐рдпрд╛тАж тАУ рдпрд╣ рд╕реНрд▓реЛрдЧрди рдХрд┐рд╕ рдореВрд╡реА рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ?",
    options: ["рд╣рд┐рдЪрдХреА", "рддрд╛рд░реЗ рдЬрд╝рдореАрди рдкрд░", "рд╕реБрдкрд░ 30", "рдЫрд┐рдЫреЛрд░реЗ"],
    correct: 2,
    image: null
  },
  {
    id: 29,
    category: "рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл",
    question: `ЁЯз╗ (рдЯреЙрдпрд▓реЗрдЯ рдкреЗрдкрд░)
                ЁЯЪ╜ (рдЯреЙрдпрд▓реЗрдЯ)
                ЁЯСйтАНтЭдтАНЁЯСи (рд╢рд╛рджреАрд╢реБрджрд╛ рдЬреЛрдбрд╝рд╛)

                рдпрд╣ рдореВрд╡реА рдХреМрди-рд╕реА?`,
    options: ["рдмрддреНрддреА рдЧреБрд▓ рдореАрдЯрд░ рдЪрд╛рд▓реВ", "рдЯреЙрдпрд▓реЗрдЯ: рдПрдХ рдкреНрд░реЗрдо рдХрдерд╛", "рдкреАрдХреЗ", "рд╢реБрдн рдордВрдЧрд▓ рдЬрд╝реНрдпрд╛рджрд╛ рд╕рд╛рд╡рдзрд╛рди"],
    correct: 1,
    image: null
  },
  {
    id: 30,
    category: "рдкрд┐рдХреНрдЯреЛрдЧреНрд░рд╛рдлрд┐рдХ рдореВрд╡реА рдмрдл",
    question: `рдбрд╛рдпрд░реЗрдХреНрдЯрд░: рд░рд╛рдЬрдХреБрдорд╛рд░ рд╣рд┐рд░рд╛рдиреА
              рдереАрдо: рдпреБрд╡рд╛рдУрдВ рдХрд╛ рджрдмрд╛рд╡, рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ, рджреЛрд╕реНрддреА
              рдЯреИрдЧрд▓рд╛рдЗрди: "рдСрд▓ рдЗрдЬрд╝ рд╡реЗрд▓"

              рдХреМрди-рд╕реА рдореВрд╡реА?`,
    options: ["рдореБрдиреНрдирд╛рднрд╛рдИ MBBS","3 рдЗрдбрд┐рдпрдЯреНрд╕", "рдкреАрдХреЗ", "рд╕рдВрдЬреВ"],
    correct: 1,
    image: null
  },

  // CATEGORY 7:  рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо
  {
    id: 31,
    category: "рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо",
    question: "'Saffron' рдХрд╛ рд╢реБрджреНрдз рд╣рд┐рдиреНрджреА рдирд╛рдо рдХреНрдпрд╛ рд╣реИ?",
    options: ["рд╣рд▓реНрджреА", "рдХреЗрд╕рд░", "рдЪрдВрджрди", "рдЬрдЯрд╛рдорд╛рдВрд╕реА"],
    correct: 1,
    image: null
  },
  {
    id: 32,
    category: "рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо",
    question: "'Asafoetida' рд╣рд┐рдиреНрджреА рдореЗрдВ рдХрд┐рд╕ рдирд╛рдо рд╕реЗ рдкреНрд░рд╕рд┐рджреНрдз рд╣реИ?",
    options: ["рдЕрдЬрд╡рд╛рдЗрди", "рд╣реАрдВрдЧ", "рдореЗрдереА", "рдХрд╛рд▓рд╛ рдирдордХ"],
    correct: 1,
    image: null
  },
  {
    id: 33,
    category: "рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо",
    question: "'Black Gram' рдХрд╛ рд╣рд┐рдиреНрджреА рд░реВрдк рдХреНрдпрд╛ рд╣реИ?",
    options: ["рдЙрдбрд╝рдж рдХреА рджрд╛рд▓", "рдорд╕реВрд░ рдХреА рджрд╛рд▓", "рдЪрдирд╛ рджрд╛рд▓", "рдореВрдБрдЧ рджрд╛рд▓"],
    correct: 0,
    image: null
  },
  {
    id: 34,
    category: "рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо",
    question: "'Tamarind' рд╣рд┐рдиреНрджреА рдореЗрдВ рдХрд┐рд╕ рдирд╛рдо рд╕реЗ рдЬрд╛рдиреА рдЬрд╛рддреА рд╣реИ?",
    options: ["рдЬрд╛рдореБрди", "рдЗрдорд▓реА", "рдмреЗрд▓", "рдХрд░реЗрд▓рд╛"],
    correct: 1,
    image: null
  },
  {
    id: 35,
    category: "рдХрдард┐рди рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд╣рд┐рдиреНрджреА рдирд╛рдо",
    question: "'Flax Seeds'  рдХреЛ рд╣рд┐рдиреНрджреА рдореЗрдВ рдХреНрдпрд╛ рдХрд╣рддреЗ рд╣реИрдВ?",
    options: ["рдЕрд▓рд╕реА", "рддрд┐рд▓", "рдЦрд╕рдЦрд╕", "рд╕реВрд░рдЬрдореБрдЦреА"],
    correct: 0,
    image: null
  },
  
  // CATEGORY 8: рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝
  {
    id: 36,
    category: "рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝",
    question: "рд╕рд╣реА рд╡рд╛рдХреНрдп рдЪреБрдирд┐рдПтАФ",
    options: [" рд╡рд╣ рдХрд┐рддрд╛рдм рдкрдврд╝рддрд╛ рд╣реИрдВред", "рд╡рд╣ рдХрд┐рддрд╛рдм рдкрдврд╝рддреА рд╣реИред", "рд╡рд╣ рдХрд┐рддрд╛рдм рдкрдврд╝рддрд╛ рд╣реИред", "рд╡рд╣ рдХрд┐рддрд╛рдм рдкрдврд╝рддреЗ рд╣реИред"],
    correct: 2,
    image: null
  },
  {
    id: 37,
    category: "рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝",
    question: "'рдореИрдВ рд╕реНрдХреВрд▓ рдЧрдпреЗред' рдЗрд╕рдореЗрдВ рддреНрд░реБрдЯрд┐ рдХреНрдпрд╛ рд╣реИ?",
    options: ["рдкреБрд░реБрд╖ рдХреА", "рд╡рдЪрди рдХреА", "рд▓рд┐рдВрдЧ рдХреА", "рдХрд╛рд░рдХ рдХреА"],
    correct: 1,
    image: null
  },
  {
    id: 38,
    category: "рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝",
    question: "рддреБрдо рд╕рдм рд░реЛрдЬрд╝ ___ рд╣реЛред",
    options: ["рдкрдврд╝рддреЗ рд╣реИ", "рдкрдврд╝рддреЗ рд╣реЛ", "рдкрдврд╝рддрд╛ рд╣реЛ", "рдкрдврд╝рддреА рд╣реИ"],
    correct: 1,
    image: null
  },
  {
    id: 39,
    category: "рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝",
    question: "'тАЬрд╕реАрддрд╛ рдФрд░ рдЧреАрддрд╛ рдЦрд╛рдирд╛ рдЦрд╛рддреА рд╣реИред' рд╡рд╛рдХреНрдп рдореЗрдВ рдЧрд▓рддреА рдХреНрдпрд╛ рд╣реИ?",
    options: ["рдЦрд╛рддреА рд╣реИ тЖТ рдЦрд╛рддреА рд╣реИрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред", "рд╕реАрддрд╛ рдФрд░ рдЧреАрддрд╛ тЖТ рд╕реАрддрд╛рдПрдБ рдФрд░ рдЧреАрддрд╛рдПрдБ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред", "рдЦрд╛рдирд╛ тЖТ рднреЛрдЬрди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред", "рдХреЛрдИ рдЧрд▓рддреА рдирд╣реАрдВред"],
    correct: 0,
    image: null
  },
  {
    id: 40,
    category: "рд╣рд┐рдиреНрджреА рд╡реНрдпрд╛рдХрд░рдгрд┐рдХ рднреВрд▓ рдХреНрд╡рд┐рдЬрд╝",
    question: "рдХреМрди-рд╕рд╛ рд╡рд╛рдХреНрдп рд╢реБрджреНрдз рд╣реИ?",
    options: ["рдореБрдЭреЗ рдкреНрдпрд╛рд╕ рд▓рдЧ рд░рд╣реА рд╣реИрдВред", "рдореБрдЭреЗ рдкреНрдпрд╛рд╕ рд▓рдЧ рд░рд╣рд╛ рд╣реИред", "рдореБрдЭреЗ рдкреНрдпрд╛рд╕ рд▓рдЧреА рд╣реИред", "рдореБрдЭреЗ рдкреНрдпрд╛рд╕ рд▓рдЧрддреЗ рд╣реИред"],
    correct: 2,
    image: null
  }  
];

const CircularTimer = ({ timeLeft, duration }) => {
  const radius = 30
  const circumference = 2 * Math.PI * radius
  const progress = (timeLeft / duration) * circumference

  // Decide color based on remaining time
  let strokeColor = "#2ecc71" // green
  if (timeLeft <= 5) {
    strokeColor = "#e63946" // red
  } else if (timeLeft <= 10) {
    strokeColor = "#f39c12" // orange
  }

  return (
    <svg width="90" height="90" className="circular-timer">
      <circle
        cx="45"
        cy="45"
        r={radius}
        stroke="#eee"
        strokeWidth="6"
        fill="none"
      />
      <circle
        cx="45"
        cy="45"
        r={radius}
        stroke={strokeColor}
        strokeWidth="6"
        fill="none"
        strokeDasharray={circumference}
        strokeDashoffset={circumference - progress}
        strokeLinecap="round"
        style={{ transition: "stroke-dashoffset 1s linear, stroke 0.5s ease" }}
      />
      <text
        x="50%"
        y="50%"
        textAnchor="middle"
        dominantBaseline="middle"
        fontSize="18"
        fontWeight="bold"
        fill="#333"
      >
        {timeLeft}s
      </text>
    </svg>
  )
}




function App() {
  const [currentScreen, setCurrentScreen] = useState('registration')
  const [participant, setParticipant] = useState({
    name: '',
    department: '',
    post: '',
    email: '',
    mobile: ''
  })
  const [currentQuestion, setCurrentQuestion] = useState(0)
  const [answers, setAnswers] = useState([])
  const [selectedAnswer, setSelectedAnswer] = useState(null)
  const [timeLeft, setTimeLeft] = useState(QUESTION_TIME)
  const [score, setScore] = useState(0)
  const [showResults, setShowResults] = useState(false)
  const [quizStartTime, setQuizStartTime] = useState(null)
  const [isSaving, setIsSaving] = useState(false);
  const [saveMessage, setSaveMessage] = useState("");

  // Timer effect
  useEffect(() => {
    if (currentScreen === 'quiz' && timeLeft > 0 && !selectedAnswer) {
      const timer = setTimeout(() => {
        setTimeLeft(timeLeft - 1)
      }, 1000)
      return () => clearTimeout(timer)
    } else if (timeLeft === 0 && currentScreen === 'quiz') {
      handleNextQuestion()
    }
  }, [timeLeft, currentScreen, selectedAnswer])

  const registerParticipant = async () => {
    try {
      const response = await fetch('https://hindiquiz2025.pythonanywhere.com/api/quiz/participants', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(participant)
      })
      
      const data = await response.json()
      
      if (data.success) {
        return data.participant
      } else {
        throw new Error(data.error)
      }
    } catch (error) {
      console.error('Registration error:', error)
      throw error
    }
  }

  const submitQuizResults = async (participantId, finalAnswers, finalScore, timeTaken) => {
    try {
      const response = await fetch(`https://hindiquiz2025.pythonanywhere.com/api/quiz/participants/${participantId}/submit`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          answers: finalAnswers,
          score: finalScore,
          time_taken: timeTaken,
          correct_answers: finalAnswers.filter(answer => answer.correct).length
        })
      })
      
      const data = await response.json()
      return data
    } catch (error) {
      console.error('Submit error:', error)
      throw error
    }
  }

  const startQuiz = async () => {

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const mobileRegex = /^[6-9]\d{9}$/;


    if (!participant.name || !participant.department || !participant.post || !participant.email || !participant.mobile) {
      alert('рдХреГрдкрдпрд╛ рд╕рднреА рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ')
      return
    }

    if (!emailRegex.test(participant.email)) {
      alert('рдХреГрдкрдпрд╛ рдорд╛рдиреНрдп рдИрдореЗрд▓ рдЖрдИрдбреА рджрд░реНрдЬ рдХрд░реЗрдВ');
      return;
    }

    if (!mobileRegex.test(participant.mobile)) {
      alert('рдХреГрдкрдпрд╛ рдорд╛рдиреНрдп рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ (10 рдЕрдВрдХреЛрдВ рдХрд╛)');
      return;
    }

    try {
      const registeredParticipant = await registerParticipant()
      setParticipant(registeredParticipant)
      setCurrentScreen('quiz')
      setQuizStartTime(Date.now())
      setTimeLeft(QUESTION_TIME)
    } catch (error) {
      alert('рдкрдВрдЬреАрдХрд░рдг рдореЗрдВ рддреНрд░реБрдЯрд┐: ' + error.message)
    }
  }

  const handleAnswerSelect = (answerIndex) => {
    setSelectedAnswer(answerIndex)
  }

  const handleNextQuestion = () => {
    const currentQ = questions[currentQuestion]
    const isCorrect = selectedAnswer === currentQ.correct
    const newAnswer = {
      questionId: currentQ.id,
      question: currentQ.question,
      selectedAnswer: selectedAnswer,
      correctAnswer: currentQ.correct,
      correct: isCorrect,
      points: isCorrect ? 3 : (selectedAnswer !== null ? -1 : 0)
    }

    const newAnswers = [...answers, newAnswer]
    setAnswers(newAnswers)
    
    const newScore = score + newAnswer.points
    setScore(newScore)

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1)
      setSelectedAnswer(null)
      setTimeLeft(QUESTION_TIME)
    } else {
      finishQuiz(newAnswers, newScore)
    }
  }

  const handleSkipQuestion = () => {
    const currentQ = questions[currentQuestion]
    const newAnswer = {
      questionId: currentQ.id,
      question: currentQ.question,
      selectedAnswer: null,  // nothing chosen
      correctAnswer: currentQ.correct,
      correct: false,
      points: 0
    }

    const newAnswers = [...answers, newAnswer]
    setAnswers(newAnswers)

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1)
      setSelectedAnswer(null)
      setTimeLeft(QUESTION_TIME)  // reset timer
    } else {
      finishQuiz(newAnswers, score)
    }
  }

  const finishQuiz = async (finalAnswers, finalScore) => {
    const timeTaken = Math.floor((Date.now() - quizStartTime) / 1000)
    
    setShowResults(true)
    setCurrentScreen('results')
    setIsSaving(true);

    try {
      await submitQuizResults(participant.id, finalAnswers, finalScore, timeTaken)
      setSaveMessage("тЬФя╕П рдкрд░рд┐рдгрд╛рдо рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛ рдЧрдП");
    } catch (error) {
      console.error('Error submitting quiz:', error)
      setSaveMessage("тЪая╕П рдкрд░рд┐рдгрд╛рдо рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рд╣реБрдИ");
    } finally {
      setIsSaving(false);
    }
  }

  const resetQuiz = () => {
    setCurrentScreen('registration')
    setParticipant({ name: '', department: '', post: '', email: '', mobile: '' })
    setCurrentQuestion(0)
    setAnswers([])
    setSelectedAnswer(null)
    setTimeLeft(QUESTION_TIME)
    setScore(0)
    setShowResults(false)
    setQuizStartTime(null)
  }

  if (currentScreen === 'registration') {
    return (
      <div className="app">
        <div className="quiz-container">
          <div className="quiz-header">

            <img src="/logo.jpg" alt="Logo" className="quiz-logo" />
            <div className="quiz-title">
              <h1 className="hindi-title">рд╕рдВрдпреБрдХреНрдд рдореБрдЦреНрдп рд╡рд┐рд╕реНрдлреЛрдЯрдХ рдирд┐рдпрдВрддреНрд░рдХ, рдкрд╢реНрдЪрд┐рдо рдордВрдбрд▓, рдореБрдВрдмрдИ</h1>
              <h4 className="english-title">JOINT CHIEF CONTROLLER OF EXPLOSIVES, WEST CIRCLE, MUMBAI</h4>
            </div>

            <div className="quiz-icon">рд╣рд┐</div>
            <h1>рд╣рд┐рдВрджреА рд░рд╛рдЬрднрд╛рд╖рд╛ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА</h1>
            <p>40 рдкреНрд░рд╢реНрди тАв 20 рд╕реЗрдХрдВрдб рдкреНрд░рддрд┐ рдкреНрд░рд╢реНрди тАв +3/-1 рдЕрдВрдХ</p>
          </div>
          
          <div className="registration-form">
            <div className="form-group">
              <label>рдЖрд╡реЗрджрдХ рдХрд╛ рдирд╛рдо</label>
              <input
                type="text"
                placeholder="рдЕрдкрдирд╛ рдкреВрд░рд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ"
                value={participant.name}
                onChange={(e) => setParticipant({...participant, name: e.target.value})}
              />
            </div>
            
            <div className="form-group">
              <label>рд╡рд┐рднрд╛рдЧ</label>
              <input
                type="text"
                placeholder="рдЕрдкрдирд╛ рд╡рд┐рднрд╛рдЧ рджрд░реНрдЬ рдХрд░реЗрдВ"
                value={participant.department}
                onChange={(e) => setParticipant({...participant, department: e.target.value})}
              />
            </div>
            
            <div className="form-group">
              <label>рдкрдж</label>
              <input
                type="text"
                placeholder="рдЕрдкрдирд╛ рдкрдж рджрд░реНрдЬ рдХрд░реЗрдВ"
                value={participant.post}
                onChange={(e) => setParticipant({...participant, post: e.target.value})}
              />
            </div>
            
            <div className="form-group">
              <label>рдИрдореЗрд▓ рдЖрдИрдбреА</label>
              <input
                type="email"
                placeholder="рдЕрдкрдирд╛ рдИрдореЗрд▓ рджрд░реНрдЬ рдХрд░реЗрдВ"
                value={participant.email}
                onChange={(e) => setParticipant({...participant, email: e.target.value})}
              />
            </div>
            
            <div className="form-group">
              <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░</label>
              <input
                type="tel"
                placeholder="рдЕрдкрдирд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ"
                value={participant.mobile}
                onChange={(e) => setParticipant({...participant, mobile: e.target.value})}
              />
            </div>
            
            <button className="start-btn" onClick={startQuiz}>
              рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА рд╢реБрд░реВ рдХрд░реЗрдВ
            </button>
            
            <div className="quiz-info">
              <ul>
                <li>тП│ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рд╢реНрди рдХреЗ рд▓рд┐рдП рд╕рдордп: 20 рд╕реЗрдХрдВрдб</li>
                <li>тЭМ рдПрдХ рдмрд╛рд░ рд╡рд┐рдХрд▓реНрдк рдЪреБрдирдиреЗ рдХреЗ рдмрд╛рдж рдмрджрд▓ рдирд╣реАрдВ рд╕рдХрддреЗ</li>
                <li>тЬЕ рд╕рд╣реА рдЙрддреНрддрд░: +3 рдЕрдВрдХ</li>
                <li>тЭМ рдЧрд▓рдд рдЙрддреНрддрд░: -1 рдЕрдВрдХ</li>
                <li>ЁЯФЩ рдХреЛрдИ рд╡рд╛рдкрд╕реА рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рд╣реИ</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    )
  }

  if (currentScreen === 'quiz') {
    const currentQ = questions[currentQuestion]
    
    return (
      <div className="app">
        <div className="quiz-container">
          <div className="quiz-header">
            <h2>рд╣рд┐рдВрджреА рд░рд╛рдЬрднрд╛рд╖рд╛ рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА</h2>
            <CircularTimer timeLeft={timeLeft} duration={QUESTION_TIME} />
          </div>
          
          <div className="quiz-progress">
            <span>рдкреНрд░рд╢реНрди {currentQuestion + 1} / {questions.length}</span>
            <span>рдЕрдВрдХ: {score}</span>
          </div>
          
          <div className="progress-bar">
            <div 
              className="progress-fill" 
              style={{width: `${((currentQuestion + 1) / questions.length) * 100}%`}}
            ></div>
          </div>
          
          <div className="question-container">
            
            {currentQ.category && (
              <p className="category-tag">рд╢реНрд░реЗрдгреА: {currentQ.category}</p>
            )}

            <h3>{currentQ.question}</h3>

            {currentQ.image && (
              <div className="question-image">
                <img src={currentQ.image} alt="question" />
              </div>
            )}
            
            <div className="options-container">
              {currentQ.options.map((option, index) => (
                <button
                  key={index}
                  className={`option ${selectedAnswer === index ? 'selected' : ''}`}
                  onClick={() => handleAnswerSelect(index)}
                >
                  {String.fromCharCode(65 + index)}. {option}
                </button>
              ))}
            </div>
            
            {selectedAnswer !== null && (
              <button className="next-btn" onClick={handleNextQuestion}>
                рдЕрдЧрд▓рд╛ рдкреНрд░рд╢реНрди
              </button>
            )}

            <button className="skip-btn" onClick={handleSkipQuestion}>
              рдкреНрд░рд╢реНрди рдЫреЛрдбрд╝реЗрдВ
            </button>
          </div>
        </div>
      </div>
    )
  }

  if (currentScreen === 'results') {
    const correctAnswers = answers.filter(answer => answer.correct).length
    const wrongAnswers = answers.filter(answer => answer.selectedAnswer !== null && !answer.correct).length
    const unanswered = answers.filter(answer => answer.selectedAnswer === null).length
    const percentage = ((correctAnswers / questions.length) * 100).toFixed(1)
    
    return (
      <div className="app">
        <div className="quiz-container">
          <div className="results-header">
            {isSaving && (
              <div className="saving-results">
                тП│ рдкрд░рд┐рдгрд╛рдо рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ...
              </div>
            )}


            <div className="org-header">
              <img src="/logo.png" alt="Organization Logo" className="org-logo" />
              <div className="org-text">
                <h2>рд╕рдВрдпреБрдХреНрдд рдореБрдЦреНрдп рд╡рд┐рд╕реНрдлреЛрдЯрдХ рдирд┐рдпрдВрддреНрд░рдХ, рдкрд╢реНрдЪрд┐рдо рдордВрдбрд▓, рдореБрдВрдмрдИ</h2>
                <h3>JOINT CHIEF CONTROLLER OF EXPLOSIVES, WEST CIRCLE, MUMBAI</h3>
              </div>
            </div>

            <h2>рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА рдкреВрд░реНрдг!</h2>
            <div className="participant-info">
              <p><strong>рдЖрд╡реЗрджрдХ рдХрд╛ рдирд╛рдо:</strong> {participant.name}</p>
              <p><strong>рд╡рд┐рднрд╛рдЧ:</strong> {participant.department}</p>
              <p><strong>рдкрдж:</strong> {participant.post}</p>
              <p><strong>рдИрдореЗрд▓ рдЖрдИрдбреА:</strong> {participant.email}</p>
              <p><strong>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</strong> {participant.mobile}</p>
            </div>
          </div>
          
          <div className="score-summary">
            <div className="final-score">
              <h3>рдХреБрд▓ рдЕрдВрдХ: {score}</h3>
              <p>рдкреНрд░рддрд┐рд╢рдд: {percentage}%</p>
            </div>
            
            <div className="score-breakdown">
              <div className="stat">
                <span className="stat-number correct">{correctAnswers}</span>
                <span className="stat-label">рд╕рд╣реА рдЙрддреНрддрд░</span>
              </div>
              <div className="stat">
                <span className="stat-number wrong">{wrongAnswers}</span>
                <span className="stat-label">рдЧрд▓рдд рдЙрддреНрддрд░</span>
              </div>
              <div className="stat">
                <span className="stat-number unanswered">{unanswered}</span>
                <span className="stat-label">рдЕрдиреБрддреНрддрд░рд┐рдд</span>
              </div>
            </div>
          </div>
          
          <div className="thank-you-message">
            <h3>ЁЯЩП рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА рдореЗрдВ рднрд╛рдЧ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж!</h3>
            <p>рдЖрдкрдХреЗ рдкрд░рд┐рдгрд╛рдо рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░ рд▓рд┐рдП рдЧрдП рд╣реИрдВред</p>
          </div>
        </div>
      </div>
    )
  }

  return null
}

export default App

